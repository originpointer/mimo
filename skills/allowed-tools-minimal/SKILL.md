---
name: allowed-tools-minimal
description: 当用户提到“最小权限”“allowed-tools”“安全执行工具/命令”时，输出一份最小权限 allowlist，并解释风险与取舍。
---

## 指令

- 先用 1-2 句复述用户目标，并明确“只给最小权限”。
- 询问（或从上下文推断）需要的能力：读文件/写文件/运行命令/网络访问/git 写入。
- 输出一份 **allowed-tools 最小集合**：
  - 仅包含本任务必需的工具
  - 对每个工具给出“为什么需要”一句话
- 若用户需求不明确，先给两套可选配置：
  - **严格模式**：只读（阅读/搜索/分析）
  - **开发模式**：允许写文件与运行构建/测试
- 最后提醒：任何高风险权限（网络、git_write、all）必须显式说明使用场景。

## 输出格式

按如下结构输出：

- 目标复述：...
- 推荐配置：
  - allowed-tools: [ ... ]
  - 说明：逐条解释
- 可选配置：
  - 严格模式：...
  - 开发模式：...
- 风险提醒：...

## 常见坑

- 直接给“全开权限”，导致不必要的风险面扩大。
- 忽略“需要用户确认”的交互点（例如网络访问/写入 git 状态）。
- 把执行步骤写得太抽象，导致无法落地到具体工具。
